!function(a){function b(a){return a.match(/^\s*$/)}function c(a){return"string"==typeof a}function d(a){return"function"==typeof a}function e(a,c){return b(a.query)?c.resolve([]):void nokia.places.search.manager.findPlaces({searchTerm:a.query,useGeoLocation:a.useGeoLocation,onComplete:function(b,d){if("OK"!==d)return c.reject();var e=f(b,a),h=[];e.forEach(function(a){var b=a.position;b.onComplete=function(d,f){"OK"===f?h.push(g(d)):(delete b.onComplete,h.push(a)),h.length===e.length&&c.resolve(h)},nokia.places.search.manager.reverseGeoCode(b)})}})}function f(a,b){return a.results.items.filter(function(a){return a.category.categoryId===i}).slice(0,b.resultsLimit)}function g(a){return a.location}function h(a){(!a||c(a))&&(a={query:a});var b={};for(var d in j)j.hasOwnProperty(d)&&(b[d]=a[d]||j[d]);return b}var i="city-town-village",j={query:"",resultsLimit:10,useGeoLocation:!0};a.jHERE.searchCities=function(b,c,f){var g=a.Deferred(),i=g.promise();return c=d(c)?c:a.noop,f=d(f)?f:a.noop,a.jHERE._JSLALoader.load().is.done(function(){e(h(b),g)}),a.when(i).then(function(a){c(a)},function(a){f(a)}),i}}(jQuery);